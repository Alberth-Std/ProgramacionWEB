Instrucciones para Probar el Proyecto (Linux - Solo Terminal)
  1. Requisitos Previos

    Para ejecutar este proyecto en un sistema Linux (Ubuntu/Debian) es necesario contar con los siguientes programas y herramientas:

    Node.js y npm

    El backend está desarrollado con Node.js.
    Se recomienda usar Node.js v18 o superior.

    Instalación:

    sudo apt update
    sudo apt install nodejs npm


    Verificar instalación:

    node -v
    npm -v

    Git

    Se utiliza Git para clonar el repositorio desde GitHub.

    Instalación:

    sudo apt install git


    Verificar:

    git --version

    OpenSSL

    Se utiliza para generar certificados SSL locales (HTTPS y HTTP/2).

    Instalación:

    sudo apt install openssl

    Verificar:

    openssl version

  2. Clonar el Repositorio

    Crear una carpeta de trabajo y clonar el proyecto desde GitHub:

    git clone https://github.com/Alberth-Std/ProgramacionWEB.git
    cd ProgramacionWEB (importante)

  3. Instalación de Dependencias

    Ejecutar:

    npm install


    Esto instalará todas las dependencias necesarias para el backend definidas en package.json.

  4. Configuración del Entorno (.env)

    Por razones de seguridad, el archivo .env no se incluye en el repositorio.

    Crear el archivo .env en la raíz del proyecto:

    touch .env


    Editar el archivo con el editor de su preferencia (ejemplo con nano):

    nano .env


    Contenido mínimo del archivo .env:

    MONGODB_URI=mongodb+srv://docente:12122025@cluster0.o53ctwr.mongodb.net/cuestionarios
    PORT=3000

    Guardar el archivo.

  5. Configuración de Certificados SSL (HTTPS y HTTP/2)

    Por motivos de seguridad, los certificados SSL no se suben al repositorio.
    Estos deben generarse localmente.

    Crear la carpeta de certificados:

    mkdir cert


    Generar certificados autofirmados con OpenSSL:

    openssl genpkey -algorithm RSA -out cert/server.key
    openssl req -new -key cert/server.key -out cert/server.csr
    openssl x509 -req -in cert/server.csr -signkey cert/server.key -out cert/server.cert


    Archivos generados en la carpeta cert/:

    server.key → Clave privada

    server.cert → Certificado público

    server.csr → Solicitud de certificado (no utilizada por la aplicación)

  6. Ejecutar el Backend

    Para iniciar el servidor backend ejecutar:

    npm run dev

  7. Verificación de Funcionamiento

    Si todo está correctamente configurado, la consola mostrará mensajes similares a:

    Servidor HTTP escuchando en http://localhost:3000
    Servidor HTTPS escuchando en https://localhost:3443
    Servidor SPDY/HTTP2 escuchando en https://localhost:4000
    ✅ Conectado a MongoDB Atlas


    Esto confirma que:

    HTTP está activo

    HTTPS está activo

    HTTP/2 (SPDY) está activo

    La conexión a MongoDB fue exitosa

  8. Pruebas de la API con Postman

    Todas las pruebas se realizan usando Postman.
    En caso de usar Postman Web, es necesario instalar el Postman Desktop Agent.
  
  8.1 Registro de Usuario (No es necesario estar logeado)

    Endpoints disponibles:

    POST https://localhost:4000/api/auth/register   (HTTP/2) Settings -> HTTP version (HTTP 2)
    POST https://localhost:3443/api/auth/register   (HTTPS) Settings -> HTTP version (HTTP 1)
    POST http://localhost:3000/api/auth/register    (HTTP) Settings -> HTTP version (HTTP 1)


    Body → raw → JSON:

    {
      "nombre": "Admin",
      "correo": "admin@demo.com",
      "password": "123456",
      "rol": "admin"
    }


    Respuesta esperada:

    {
      "message": "Usuario registrado",
      "usuario": {
        "_id": "...",
        "nombre": "Admin",
        "correo": "admin@demo.com",
        "rol": "admin"
      }
    }

  8.2 Login y Obtención del Token JWT

    Endpoints:

    POST https://localhost:4000/api/auth/login
    POST https://localhost:3443/api/auth/login
    POST http://localhost:3000/api/auth/login


    Body → raw → JSON:

      {
        "correo": "admin@demo.com",
        "password": "123456"
      }

    Respuesta:

    {
      "token": "JWT_GENERADO"
    }


    Este token debe configurarse en Postman:

    Authorization → Bearer Token

  8.3 Poblado de Entidades del Sistema

    Una vez autenticado el usuario administrador, se pueden crear los datos base del sistema.

    Ejemplo: Crear Categorías (Es necesario estar logeado como admin, cualquier otro login falla)

    Endpoints:

    POST https://localhost:4000/api/categorias  (HTTP/2) Settings -> HTTP version (HTTP 2)
    POST https://localhost:3443/api/categorias  (HTTPS) Settings -> HTTP version (HTTP 1)
    POST http://localhost:3000/api/categorias   (HTTP) Settings -> HTTP version (HTTP 1)


    Body → raw → JSON:

    {
      "nombre": "Programación",
      "descripcion": "Preguntas relacionadas a programación",
      "estado": true
    }

    Ejemplo: Crear Rango de edad (no es necesario estar logeado)

    Endpoints:

    POST https://localhost:4000/api/rango-edad  (HTTP/2) Settings -> HTTP version (HTTP 2)
    POST https://localhost:3443/api/rango-edad  (HTTPS) Settings -> HTTP version (HTTP 1)
    POST http://localhost:3000/api/rango-edad   (HTTP) Settings -> HTTP version (HTTP 1)


    Body → raw → JSON:

    {
      "edadMinima": 12,
      "edadMaxima": 16,
      "descripcion": "Nivel Secundaria - adolecentes"
    }


  8.4 Verificación del Poblado

    Para verificar que los datos fueron insertados correctamente verificar por cualquier servidor:

    GET https://localhost:4000/api/usuarios		Settings -> HTTP version (HTTP 2)
    GET https://localhost:3443/api/categorias	Settings -> HTTP version (HTTP 1)
    GET http://localhost:3000/api/rango-edad	Settings -> HTTP version (HTTP 1)